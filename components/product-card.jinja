{% if product %}

<div product-id="{{product.id}}" itemscope itemtype="https://schema.org/Product" class="product-item position-relative custom-card-1 {% if product.is_infinite == false and product.quantity <= 0 %}product-item-out-of-stock{% endif %}">
    

    <div  class="parent-img {% if product.discount_percentage %}has-discount{% endif %}">


        {% if product.badge %}
        {% set positionProductCard = true %}
        {% include 'vitrin:products/badge.jinja' %}
        {% endif %}
        {% if product.discount_percentage %}
            <span class="discound-tag" >
                {{ _("Discount") }}&nbsp;{{ product.discount_percentage }}%
            </span>
        {% endif %}

        <a href="/products/{{ product.slug }}">
                <img id="product-card-img-{{ product.id }}" width="288" height="300" {% if product.images or product.videos %}
            src="{{ product.main_image.image.small if product.main_image else '' }}" {% else %}
            src="{{ image_url(('product-img.svg' | asset_url), w=235, q=100, f='auto') }}" {% endif %}
            alt="{{ product.name }}">
        </a>
        
        <span class="product-card-bundle-offer" data-bundle-offer-product-id="{{ product.id }}"></span>
        <div class="wish_quick-view">
            <span class="add-to-wishlist" data-wishlist-id="{{ product.id }}">
                <span zid-visible-customer="true">
                    <button zid-visible-wishlist="{{ product.id }}" class="icon-heart-mask filled"
                        onclick="addToWishlist(this, '{{ product.id }}')"></button>
                    <button zid-hidden-wishlist="{{ product.id }}" class="icon-heart-mask"
                        onclick="addToWishlist(this, '{{ product.id }}')"></button>
                </span>
                <a zid-visible-guest="true" class="icon-heart-mask"
                    href="/auth/login?redirect_to={{ session.url.path }}"
                    onclick="event.preventDefault(); handleLoginAction('', false); return false;"><i
                        class="bi bi-heart"></i></a>
                <img class="loader d-none" src="{{ 'spinner.gif' | asset_url }}" width="20" height="20" />
            </span>
            <span class="quick-view-icon"><i class="bi bi-eye"></i></span>
        </div>

    </div>
    <div class="card-content">
        <div class="card-content-inner">
            <div class="category-rate">
                <div class="category-name">
                    <span>{{product.categories[0].name}}</span>
                </div>
                {% if store.settings.products.reviews_enabled %}
                    <div class="product-card-rating-wrapper" >
                        {% if product.rating %}
                        {% set rating=product.rating.average %}{% include 'components/rating-stars.jinja' %}
                        {% if product.rating.total_count > 0 %}<span class="product-card-rating-count">({{
                            product.rating.total_count }})</span>{% endif %}
                        {% endif %}
                    </div>
                {% endif %}
            </div>
            
            
                <div class="custom-product-title"><span itemprop="name">{{ product.name | safe }}</span></div>
                
            
            {% if product.formatted_sale_price is not none %}
            <div class="product-price-sec">
                <div class="price"><span>{{ product.formatted_sale_price }}</span></div>
                <div class="prev-price"><span>{{ product.formatted_price }}</span></div>
            </div>
            {% else %}
            <div class="product-price-sec">
                <div class="price"><span>{{ product.formatted_price }}</span></div>
            </div>
            {% endif %}
        </div>
        <div class="btns-card" style="text-align: center">
            {% if product.is_infinite == false and product.quantity <= 0 %} <a
                class="btn btn-primary btn-product-card-out-of-stock">
                <img src="{{ 'u_bell.svg' | asset_url }}" alt="" width="18" height="18" class="d-inline">
                <span>{{ _("Notify me when available") }}</span>
                </a>
                {% elif ( product.has_options or product.has_fields or product.product_class == 'dynamic_bundle' ) %}
                <a class="btn btn-primary btn-product-card-select-variant" href="/products/{{ product.slug }}">
                {{ _("add to cart") }}</a>
                {% else %}
                <a class="btn btn-primary product-card-add-to-cart"
                    onclick="event.preventDefault(); event.stopPropagation(); productCartAddToCart(this,'{{ product.id }}')">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.30887 6.75001C7.66846 4.48301 9.63185 2.75 12 2.75C14.3682 2.75 16.3315 4.48301 16.6911 6.75L7.30887 6.75001ZM5.79454 6.75001C6.16505 3.65183 8.80204 1.25 12 1.25C15.198 1.25 17.8349 3.65183 18.2055 6.75L19.4646 6.75H19.4646C19.9568 6.74994 20.4052 6.74989 20.7642 6.80237C21.1588 6.86006 21.5792 6.99805 21.8925 7.38056C22.2023 7.75888 22.2601 8.19716 22.2487 8.59566C22.2381 8.96381 22.1625 9.41437 22.0784 9.9159L20.8588 17.191L20.8588 17.1911C20.6661 18.3404 20.5103 19.2701 20.2959 19.997C20.0731 20.7522 19.7632 21.3781 19.2054 21.8613C18.6454 22.3465 17.9864 22.5572 17.2166 22.6557C16.4801 22.75 15.5596 22.75 14.4285 22.75H9.57149C8.44034 22.75 7.51991 22.75 6.78342 22.6557C6.01361 22.5572 5.35455 22.3465 4.79455 21.8613C4.23682 21.3781 3.92692 20.7522 3.70412 19.997C3.48969 19.2701 3.33385 18.3404 3.1412 17.1911L1.92964 9.96382L1.92161 9.91593C1.83748 9.41439 1.76191 8.96382 1.75133 8.59566C1.73988 8.19716 1.79764 7.75888 2.10749 7.38055C2.42076 6.99805 2.84115 6.86006 3.23581 6.80237C3.59476 6.74989 4.04321 6.74994 4.53542 6.75H4.53543L4.58563 6.75001L5.79454 6.75001ZM3.26376 8.34587C3.26538 8.33941 3.26677 8.33514 3.26767 8.33265L3.27203 8.33053C3.29237 8.3211 3.34365 8.30255 3.4528 8.28659C3.69004 8.25191 4.02651 8.25001 4.58563 8.25001L19.4144 8.25001C19.9735 8.25001 20.3099 8.25191 20.5472 8.28659C20.6563 8.30255 20.7076 8.3211 20.728 8.33053L20.7323 8.33265C20.7332 8.33514 20.7346 8.33942 20.7362 8.34587C20.7434 8.37446 20.7526 8.43547 20.7493 8.5526C20.742 8.80447 20.6857 9.15105 20.591 9.71583L19.3874 16.8954C19.1849 18.1038 19.0428 18.9432 18.8572 19.5725C18.6769 20.1836 18.4799 20.5053 18.2232 20.7276C17.9689 20.948 17.6338 21.0901 17.0261 21.1679C16.3959 21.2486 15.5718 21.25 14.3782 21.25H9.62181C8.42816 21.25 7.60407 21.2486 6.97393 21.1679C6.36621 21.0901 6.03112 20.948 5.77674 20.7276C5.52009 20.5053 5.32307 20.1836 5.14282 19.5725C4.95715 18.9432 4.81513 18.1038 4.61257 16.8954L3.409 9.71583C3.31432 9.15105 3.25795 8.80447 3.25071 8.5526C3.24735 8.43547 3.25658 8.37445 3.26376 8.34587Z" fill="currentColor"/>
                    </svg>

                    <img style="display: inline" class="add-to-cart-progress d-none"
                        src="{{ 'spinner.gif' | asset_url }}" width="20" height="20" />
                    {{ _("add to cart") }}
                </a>
                {% endif %}
        </div>
    </div>

</div>
{% endif %}